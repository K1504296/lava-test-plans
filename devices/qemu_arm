{% set PROJECT = PROJECT|default("") %}
{% extends PROJECT+"qemu.jinja2" %}

{# libhugetlbfs_word_size variable is required for libhugetlbfs.yaml test template #}
{% set libhuggetlbfs_word_size = 32 %}
{% if AUTO_LOGIN_PROMPT is undefined %}{% set AUTO_LOGIN_PROMPT = "am57xx-evm login:" %}{% endif %}
{% if BOOT_OS_PROMPT is undefined %}{% set BOOT_OS_PROMPT = "root@am57xx-evm:" %}{% endif %}
{% if target_boot_timeout is undefined %}{% set target_boot_timeout = 15 %}{% endif %}
{% set smp_core_count = "2" %}

{% block global_settings %}
{{ super() }}
  arch: arm64
  netdevice: tap
  machine: virt-2.10,accel=kvm
  cpu: host,aarch64=off
{% endblock global_settings %}

{% block device_type %}qemu-arm{% endblock %}

{% block rootfs_extra_args %}
        {{ super() }}
        sparse: false
{% endblock rootfs_extra_args %}

{% block boot_extra_args %}
        image_arg: -kernel {kernel} --append "console=ttyAMA0 root=/dev/vda rw"
        type: image
{% endblock boot_extra_args %}
